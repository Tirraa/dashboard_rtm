# Blog quirks

There are certain subtleties that you must know about the blog in this codebase.

## The `PostSchema` and `BlogPostType` types

There is a "weird" defined document type in [the _Contentlayer tweakers config file_](/interop/config/contentlayer/contentlayerConfigTweakers.ts),
which is named `PostSchema`.  
It has an empty `filePathPattern`, and no `computedFields`.

If you pay closer attention to `PostSchema` in the `.contentlayer/generated/index.d.ts` file, you should understand quickly what it is:

```ts
// .contentlayer/generated/index.d.ts

// * ... Just an example of what would be a blog post document's type
export type BlogPostExample = {
  _id: string;
  _raw: Local.RawDocumentData;
  type: 'BlogPostExample';
  title: string;
  metadescription: string;
  description?: string | undefined;
  date: IsoDateTimeString;
  body: Markdown;
  url: string;
};

// * ... The PostSchema type, as it would be generated
export type PostSchema = {
  _id: string;
  _raw: Local.RawDocumentData;
  type: 'PostSchema';
  title: string;
  metadescription: string;
  description?: string | undefined;
  date: IsoDateTimeString;
  url: string;
  body: Markdown;
};
```

The purpose of this "Schema" is to craft the _`BlogPostType` type_.  
To create a "Base" post type that rules all the others, and will allow us to proceed with a _generic_ approach.

Notice that _Contentlayer_ generates a _phantom type_, which is the `type` field.  
This field ensures that you cannot "Confuse" one type of document with another one.  
But, by dynamically creating the `PostSchema`, coupled to all its related documents, then you can `Omit` this `type` field, and gain all the
advantages of the [_`BlogPostType` type_.](/src/types/Blog.ts)

```ts
// types/Blog.ts
import type { PostSchema } from 'contentlayer/generated';

type ContentLayerPhantomType = 'type';
export type BlogPostType = Omit<PostSchema, ContentLayerPhantomType>;
```

See also:

- [_Edit blog posts fields_](./03.edit-blog-posts-fields.md)
- [_Add new blog category_](./02.add-new-blog-category.md)

---

Happy coding! :)
