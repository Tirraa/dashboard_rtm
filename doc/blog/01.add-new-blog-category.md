# Add a new blog category

We will create a new blog section.  
This entire process is errors-driven.

---

## Our first new blog category

As I write these lines, the [posts folder](/posts/) looks like this:

```
└── patch-notes
    ├── dashboard
    │   ├── en
    │   │   └── post-01.md
    │   └── post-01.md
    └── discord-bot
        ├── en
        │   └── post-01.md
        └── post-01.md
```

First, let's create a new directory in the [posts folder.](/posts/)  
We will name it `dummy-category`.

Then, we'll need to add a _subcategory_. To do this, let's create a new directory inside our `dummy-category` folder, named `dummy-subcategory`.

Now, the [posts folder](/posts/) should look like this:

```
├── dummy-category
│   └── dummy-subcategory
└── patch-notes
    ├── dashboard
    │   ├── en
    │   │   └── post-01.md
    │   └── post-01.md
    └── discord-bot
        ├── en
        │   └── post-01.md
        └── post-01.md
```

Let's add a _post_ inside `dummy-category/dummy-subcategory`, named `dummy-post.md`.

```markdown
---
title: Dummy post
metadescription: Dummy post metadescription
description: Dummy post description for post snippet
date: 2023-09-19 06:00
---

Hello world!
```

```
└── dummy-category
    └── dummy-subcategory
        └── dummy-post.md
```

### The [contentlayer.config.ts file](/contentlayer.config.ts)

Let's open the [contentlayer.config.ts file.](/contentlayer.config.ts)  
Then, we will create the `DummyPost` type.

Basically, we just need to copy/paste `PatchPost` and slightly adapt it:

```ts
// contentlayer.config.ts
const DummyPost = defineDocumentType(() => ({
  name: 'DummyPost', // * ... Adapt the type name
  filePathPattern: '**/dummy-category/**/*.md', // * ... Adapt the file path pattern
  fields: {
    title: { type: 'string', required: true },
    metadescription: { type: 'string', required: true },
    description: { type: 'string', required: false },
    date: { type: 'date', required: true }
  },
  computedFields: {
    url: { type: 'string', resolve: (post) => `/${post._raw.flattenedPath}` }
  }
}));
```

Then, we'll append this new _Post type_.  
Let this:

```ts
// contentlayer.config.ts
export default makeSource({ contentDirPath, documentTypes: [PhantomPost, PatchPost] });
```

Becomes:

```ts
// contentlayer.config.ts
export default makeSource({ contentDirPath, documentTypes: [PhantomPost, PatchPost, DummyPost] });
```

Let's build!

> Generated \_ documents in .contentlayer

### The [blog.ts config file](/src/config/blog.ts)

Now we have to edit the [blog.ts config file.](/src/config/blog.ts)  
Firstly, let's adapt the `BlogArchitecture` type.

This:

```ts
// config/blog.ts
export type BlogArchitecture = {
  'patch-notes': 'dashboard' | 'discord-bot';
};
```

Becomes:

```ts
// config/blog.ts
export type BlogArchitecture = {
  'patch-notes': 'dashboard' | 'discord-bot';
  'dummy-category': 'dummy-subcategory';
};
```

We'll also need to adjust the value of `BLOG_CATEGORIES_ALL_POSTS_CONSTS_ASSOC`.

Let's change this:

```ts
// config/blog.ts
BLOG_CATEGORIES_ALL_POSTS_CONSTS_ASSOC: {
  'patch-notes': () => allPatchPosts
}
```

To this:

```ts
// config/blog.ts
BLOG_CATEGORIES_ALL_POSTS_CONSTS_ASSOC: {
  'patch-notes': () => allPatchPosts,
  'dummy-category': () => allDummyPosts // * ... Added our new category and all its related posts
}
```

Let's try to build again.  
We'll have an error.

> ./src/app/[locale]/[categ]/page.tsx:133:25  
> **Type error**: No overload matches this call. Type '"dummy-category.\_title"' is not assignable to type '"patch-notes.dashboard" |
> "patch-notes.discord-bot" | "patch-notes.\_title"'.

This is because we need to add some informations in our _locales_ files.

### The blog categories i18n

Let's start by editing our _default language_ file. In the current case, it is [fr.ts](/src/i18n/locales/fr.ts), but it would depend about
[your i18n config on your side](/src/config/i18n.ts): the _default language_ will be the _locale_ targeted by _VocabBase_, that must also match the
`ELanguagesFlag` enum first key.

So:

```ts
// fr.ts
export default {
  // * ...
  'blog-categories': {
    'patch-notes': {
      _title: 'Patch Notes',
      'discord-bot': 'Bot Discord',
      dashboard: 'Dashboard'
    }
  }
  // * ...
} as const;
```

Would become:

```ts
// fr.ts
export default {
  // * ...
  'blog-categories': {
    'patch-notes': {
      _title: 'Patch Notes',
      'discord-bot': 'Bot Discord',
      dashboard: 'Dashboard'
    },
    'dummy-category': {
      _title: 'Catégorie bidon',
      'dummy-subcategory': 'Sous-catégorie bidon'
    }
  }
  // * ...
} as const;
```

> **And do not forget to also update your _locales_ in all the other languages!**

Let's build again!  
Then, go to `/dummy-category`.

<p align="center"><img src="./Assets/01.add-new-blog-category/final-result-en.png" alt="Result (en)"/></p>
<p align="center"><img src="./Assets/01.add-new-blog-category/final-result-fr.png" alt="Result (fr)"/></p>

Congrats!  
You made it!
