"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ts_morph_1 = require("ts-morph");
const config_1 = require("../../config");
function generateBlogType(blogArchitecture, __BLOG_TYPE_STR = config_1.BLOG_TYPE_STR, __TARGET_FOLDER = config_1.GENERATIONS_TARGET_FOLDER) {
    const project = new ts_morph_1.Project();
    const sourceFile = project.createSourceFile(`${__TARGET_FOLDER}/${__BLOG_TYPE_STR}.ts`, {
        statements: [
            {
                type: JSON.stringify(blogArchitecture, (_, v) => (Array.isArray(v) ? v.map((slug) => `'${slug}'`).join(' | ') : v), 2).replace(/"'|'"/g, "'"),
                kind: ts_morph_1.StructureKind.TypeAlias,
                name: __BLOG_TYPE_STR,
                isExported: false
            }
        ]
    }, { overwrite: true });
    const oldTextLength = sourceFile.getText().length;
    sourceFile.insertText(0, config_1.AUTOGENERATED_CODE_COMMENT_STR);
    sourceFile.insertText(oldTextLength + config_1.AUTOGENERATED_CODE_COMMENT_STR.length, `export default ${__BLOG_TYPE_STR};`);
    sourceFile.formatText(config_1.TS_MORPH_FORMATTER_SETTINGS);
    sourceFile.saveSync();
}
exports.default = generateBlogType;
